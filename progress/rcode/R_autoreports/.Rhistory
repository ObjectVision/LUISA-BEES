knitr::opts_chunk$set(fig.width = 7,
fig.height = 4)
#setwd("C:/LUISA-BEES/LUISA-BEES/progress/rcode/R_autoreports")
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "..") # file path relative to the root of the project directory
#install.packages("E:\\mubarsa\\Documents\\Downloads\\rlang_0.3.1.gz", repos = NULL, type = "source")
#install.packages("ggplot2", dep = TRUE)
#install.packages("dplyr", dep = TRUE)
#install.packages("tidyverse", dep = TRUE)
library(ggplot2)
library(rlang)
library(purrr)
library(dplyr)
library(hms)
library(tidyverse)
library(readxl)
#library(ggplot2)
library(zoo)
library(data.table)
library(foreign)
library(networkD3)
library(rmarkdown)
filename<-"_xTabData.csv"
afflist<-list.files(datadirAFF)
datadirAFF<-"C:/LUISA-BEES_2022/LUISA-BEES/results/StatusQuo"
datadirBAU<-"C:/LUISA-BEES_2022/LUISA-BEES/results/StatusQuoBAU"
countrydir<-"D:/landuse/LUISA-BEES_outmay162020"
countries<-list.dirs(countrydir, full.names = FALSE, recursive=FALSE)
year<-c("2020","2025","2030","2035","2040","2045","2050")
filename<-"_xTabData.csv"
afflist<-list.files(datadirAFF)
baulist<-list.files(datadirBAU)
wholelist<-list()
for (y in seq_along(year)) {
countrylist = list()
for (i in seq_along(countries)) {
xtab<-read.csv(paste0(datadirAFF,"/AI00_AW20_", countries[i],"_P",year[y], filename), sep = ";")
xtab$year<-year[y]
xtab$country<-countries[i]
countrylist[[i]] <- xtab
}
allcountries = do.call(rbind, countrylist)
wholelist[[y]] <- allcountries
}
xTabAff_all = do.call(rbind,wholelist)
xTabAff_for<-grep("Forest land", xTabAff_all$Label)
aff_sumEUfor<-aggregate(xTabAff_all$count[xTabAff_for], by=list(year=xTabAff_all$year[xTabAff_for], country=xTabAff_all$country[xTabAff_for]), FUN=sum)
#bau_plot<-aggregate(eu_plot1$x, by=list(year_allEU=eu_plot1$year), FUN=sum)
#EU average
euflAFF<-aff_sumEUfor %>%
group_by(year) %>%
summarize(sumForest = sum(x))
plot(euflAFF)
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_line() +labs (title = "Forest land 2020-2050",y="ha forest land", x="year")
plotpercountry<-ggplot(aff_sumEUfor,aes(x=year, y=x,group=country,color=country)) + geom_line() +labs (title = "Forest land 2020-2050",y="ha forest land", x="year")
plot(euflAFF)
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest))
plotperEU
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_line()
plotperEU
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_points()
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_point()
plotperEU
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_point() +labs (title = "Forest land 2020-2050",y="ha forest land", x="year")
plotperEU
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_point() +labs (title = "Forest land 2020-2050",y="ha forest land", x="year") + geom_point(data = euflAff, color = "red")
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_point() +labs (title = "Forest land 2020-2050",y="ha forest land", x="year") + geom_point(data = euflAFF, color = "red")
plotperEU
datadirAFF<-"C:/LUISA-BEES_2022/LUISA-BEES/results/StatusQuo"
datadirREF<-"C:/LUISA-BEES_2022/LUISA-BEES/results/StatusQuoBAU"
countrydir<-"D:/landuse/LUISA-BEES_outmay162020"
countries<-list.dirs(countrydir, full.names = FALSE, recursive=FALSE)
year<-c("2020","2025","2030","2035","2040","2045","2050")
filename<-"_xTabData.csv"
baulist<-list.files(datadirBAU)
wholelist<-list()
for (y in seq_along(year)) {
countrylist = list()
for (i in seq_along(countries)) {
xtab<-read.csv(paste0(datadirBAU,"/AI00_AW20_", countries[i],"_P",year[y], filename), sep = ";")
xtab$year<-year[y]
xtab$country<-countries[i]
countrylist[[i]] <- xtab
}
allcountries = do.call(rbind, countrylist)
wholelist[[y]] <- allcountries
}
datadirAFF<-"C:/LUISA-BEES_2022/LUISA-BEES/results/StatusQuo"
datadirBAU<-"C:/LUISA-BEES_2022/LUISA-BEES/results/StatusQuoREF"
countrydir<-"D:/landuse/LUISA-BEES_outmay162020"
countries<-list.dirs(countrydir, full.names = FALSE, recursive=FALSE)
year<-c("2020","2025","2030","2035","2040","2045","2050")
filename<-"_xTabData.csv"
baulist<-list.files(datadirBAU)
wholelist<-list()
for (y in seq_along(year)) {
countrylist = list()
for (i in seq_along(countries)) {
xtab<-read.csv(paste0(datadirBAU,"/AI00_AW20_", countries[i],"_P",year[y], filename), sep = ";")
xtab$year<-year[y]
xtab$country<-countries[i]
countrylist[[i]] <- xtab
}
allcountries = do.call(rbind, countrylist)
wholelist[[y]] <- allcountries
}
countries[i]
filename<-"_xTabData.csv"
baulist<-list.files(datadirBAU)
wholelist<-list()
for (y in seq_along(year)) {
countrylist = list()
for (i in seq_along(countries)) {
xtab<-read.csv(paste0(datadirBAU,"/AI00_AW20_", countries[i],"_P",year[y], filename), sep = ";")
xtab$year<-year[y]
xtab$country<-countries[i]
countrylist[[i]] <- xtab
}
allcountries = do.call(rbind, countrylist)
wholelist[[y]] <- allcountries
}
countries[i]
filename<-"_xTabData.csv"
baulist<-list.files(datadirBAU)
wholelist<-list()
for (y in seq_along(year)) {
countrylist = list()
for (i in seq_along(countries)) {
xtab<-read.csv(paste0(datadirBAU,"/AI00_AW20_", countries[i],"_P",year[y], filename), sep = ";")
xtab$year<-year[y]
xtab$country<-countries[i]
countrylist[[i]] <- xtab
}
allcountries = do.call(rbind, countrylist)
wholelist[[y]] <- allcountries
}
countries[i]
filename<-"_xTabData.csv"
baulist<-list.files(datadirBAU)
wholelist<-list()
for (y in seq_along(year)) {
countrylist = list()
for (i in seq_along(countries)) {
xtab<-read.csv(paste0(datadirBAU,"/AI00_AW20_", countries[i],"_P",year[y], filename), sep = ";")
xtab$year<-year[y]
xtab$country<-countries[i]
countrylist[[i]] <- xtab
}
allcountries = do.call(rbind, countrylist)
wholelist[[y]] <- allcountries
}
countries[i]
filename<-"_xTabData.csv"
baulist<-list.files(datadirBAU)
wholelist<-list()
for (y in seq_along(year)) {
countrylist = list()
for (i in seq_along(countries)) {
xtab<-read.csv(paste0(datadirBAU,"/AI00_AW20_", countries[i],"_P",year[y], filename), sep = ";")
xtab$year<-year[y]
xtab$country<-countries[i]
countrylist[[i]] <- xtab
}
allcountries = do.call(rbind, countrylist)
wholelist[[y]] <- allcountries
}
xTabBau_all = do.call(rbind,wholelist)
xTabAff_for<-grep("Forest land", xTabAff_all$Label)
aff_sumEUfor<-aggregate(xTabAff_all$count[xTabAff_for], by=list(year=xTabAff_all$year[xTabAff_for], country=xTabAff_all$country[xTabAff_for]), FUN=sum)
#EU average
euflAFF<-aff_sumEUfor %>%
group_by(year) %>%
summarize(sumForest = sum(x))
xTabBau_for<-grep("Forest land", xTabBau_all$Label)
bau_sumEUfor<-aggregate(xTabBau_all$count[xTabBau_for], by=list(year=xTabBau_all$year[xTabBau_for], country=xTabBau_all$country[xTabBau_for]), FUN=sum)
#bau_plot<-aggregate(eu_plot1$x, by=list(year_allEU=eu_plot1$year), FUN=sum)
#EU average
euflBAU<-bau_sumEUfor %>%
group_by(year) %>%
summarize(sumForest = sum(x))
plotperEU<-ggplot(euflAFF,aes(x=year, y=sumForest)) + geom_point() +labs (title = "Forest land 2020-2050",y="ha forest land", x="year") + geom_point(data = euflBAU, color = "red")
plotperEU
